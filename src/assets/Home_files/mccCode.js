var mcc=angular.module('mcc',['MccService']);mcc.directive('mcc',['$compile',function($compile){return{require:['mcc'],restrict:'E',transclude:true,replace:true,scope:{mcccode:'=?',edit:'@?'},controller:['$scope','$element','Mcc',function($scope,$element,Mcc){if($scope.edit){var mcccode=$scope.mcccode;if(!Mcc.mccCodeDict){return;}
var mccList=[];var sections=$('<ul>',{'id':'mccSearch','class':'mccSearch'});var i=1;$.each(Mcc.mccCodeDict,function(section,codes){if(section==="VALIDRANGES"){Mcc.MccRange=codes;}else{var items=[];$.each(codes,function(mccId,code){mccList.push(mccId);items.push('<li id="'+mccId+'""><input type="radio" ng-model="mcccode" name="mccCodeLookup" value="'+mccId+'" id="radio'+mccId+'" /><label for="radio'+mccId+'">'+code+'</label></li>');});sections.append($('<li>',{'id':i++}).append('<a class="nodename"><div class="mccToggler"><i></i></div><img src="/activation/Content/images/folder.png" /><span class="mccHeader">'+section+'</span><span class="nodelength"></span></a>').append($('<ul/>',{'class':'my-codes',html:items.join('')})));}});Mcc.MccList=mccList;$($element).find('.mccSearchBox').after($compile(sections)($scope));Mcc.StartSearchList();$scope.clear=function(){var searchinput=$('#mccSearchInput');var searchlist=$('#mccSearch');var searchTerms='';searchlist.find('li').each(function(){var hasMatch=searchTerms.length===0||$(this).text().toLowerCase().indexOf(searchTerms.toLowerCase())>-1;$(this).toggle(hasMatch);if(this.style.display!=='none'){$(this).addClass('show_me');}else{$(this).removeClass('show_me');}});searchlist.find('li.parent').each(function(){if($(this).find('li.show_me').length<1){$(this).hide().removeClass('show_me');}else{$(this).find('.nodelength').html('('+$(this).find('li.show_me').length+')');}});$('#mccSearch').find('li ul').hide();$('#mccSearch').find('li div').removeClass('down');}
if($scope.mcccode){Mcc.FolderToggler($('#radio'+mcccode).parents('li'),$('#mccSelect'));}
$scope.showList=function(){$('#mccSearch').find('li ul').show();$('#mccSearch').find('li div').addClass('down');}}
var getMCCCode=function(){return $scope.mcccode;};}],templateUrl:function(element,attrs){if(attrs.edit){return attrs.templateUrl||'/Activation/Areas/AccountUpdater/Client/AUWidgets/MccCodeModule/MccTable.html';}
return attrs.templateUrl||'/Activation/Areas/AccountUpdater/Client/AUWidgets/MccCodeModule/MccArea.html';}}}]);