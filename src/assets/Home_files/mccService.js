var MccService=angular.module('MccService',[]);MccService.service('Mcc',[function(){var _this=this;this.IsValidMcc=function(value){var validMcc=false;if(_this.MccRange===undefined||_this.MccList===undefined){_this.BuildMccTree();}
if($.inArray(value,_this.MccList)>-1){validMcc=true;}
$.each(_this.MccRange,function(start,end){if(start<value&&value<end){validMcc=true;}});return validMcc;};this.BuildMccTree=function(){var timeout=0;if(!_this.mccCodeDict){$.getJSON('/activation/Content/js/boarding/mcccodes.js',function(data){_this.mccCodeDict=data;});}
var mccList=[];var sections=$('<ul>',{'id':'mccSearch','class':'mccSearch'});var i=1;$.each(_this.mccCodeDict,function(section,codes){if(section==="VALIDRANGES"){_this.MccRange=codes;}else{var items=[];$.each(codes,function(mccId,code){mccList.push(mccId);items.push('<li id="'+mccId+'""><input type="radio" ng-model="mcccode" name="mccCodeLookup" value="'+mccId+'" id="radio'+mccId+'" /><label for="radio'+mccId+'">'+code+'</label></li>');});sections.append($('<li>',{'id':i++}).append('<a class="nodename"><div class="mccToggler"><i></i></div><img src="/activation/Content/images/folder.png" /><span class="mccHeader">'+section+'</span><span class="nodelength"></span></a>').append($('<ul/>',{'class':'my-codes',html:items.join('')})));}});_this.MccList=mccList;$('.mccSearchBox').eq(0).after(sections);_this.StartSearchList();}
this.InitialNodeLength=function(searchlist){$.each(searchlist.find('li ul'),function(index,value){var mylist=$(value);mylist.parent().find('.nodelength').html('('+mylist.find('li').length+')');});};this.FolderToggler=function(folder,parentObj){var toggler=$(folder).find('.mccToggler');folder.find('ul').slideToggle('fast',function(){toggler.toggleClass('down');if(parentObj.find('input').val()===''){if(toggler.hasClass('down')){folder.find('ul li').addClass('show_me');}else{folder.find('ul li').removeClass('show_me');}}
var thelist=$(folder).find('ul');_this.TableStriping(thelist);}).toggleClass();};this.TableStriping=function(table){table.find('li').removeClass('odd').removeClass('even');$.each($(table).find('li.show_me'),function(index,value){if(index%2===0){$(value).addClass('odd');}else{$(value).addClass('even');}});};this.DoSearchList=function(elm,list,parentObj,searchlist){var clearsearchBtn=$('#btnClearMcc');var searchinput=$('#mccSearchInput');$(searchinput).keypress(function(e){if(e.which===13){return false;}});$(searchinput).keyup(function(){if(!searchinput.val()){clearsearchBtn.hide();parentObj.find('ul li ul').hide();parentObj.find('ul li div').removeClass('down');}else{clearsearchBtn.show();parentObj.find('ul li ul').show();parentObj.find('ul li div').addClass('down');}
var searchTerms=$(this).val();searchlist.find('li').each(function(){var hasMatch=searchTerms.length===0||$(this).text().toLowerCase().indexOf(searchTerms.toLowerCase())>-1;$(this).toggle(hasMatch);if(this.style.display!=='none'){$(this).addClass('show_me');}else{$(this).removeClass('show_me');}});searchlist.find('li.parent').each(function(){if($(this).find('li.show_me').length<1){$(this).hide().removeClass('show_me');}else{$(this).find('.nodelength').html('('+$(this).find('li.show_me').length+')');}});_this.TableStriping(list);clearsearchBtn.click(function(){searchinput.val('');clearsearchBtn.hide();searchlist.find('li ul').parent().show();parentObj.find('ul li').addClass('show_me');parentObj.find('ul li ul li').show();parentObj.find('ul li ul').hide();parentObj.find('ul li div').removeClass('down');searchlist.find('li ul').parent().each(function(){$(this).find('.nodelength').html('('+$(this).find('li').length+')');});});});};this.StartSearchList=function(){var parentObj=$('#mccSelect');var searchlist=$('#mccSearch');var parPar=parentObj.find('li > ul').parent();parPar.addClass('parent show_me').prepend('<div class="mccToggler"><i></i></div>');parentObj.find('i').click(function(){_this.FolderToggler($(this).closest('li'),parentObj);});_this.InitialNodeLength(searchlist);_this.TableStriping(searchlist);$(function(){_this.DoSearchList($("div.mccSelectInner"),$("#mccSearch"),parentObj,searchlist);searchlist.find('li > ul').hide();});searchlist.find('.nodename').click(function(){_this.FolderToggler($(this).closest('li'),parentObj);});}
this.mccCodeDict={"NECESSITY":{"4900":"4900 UTILITIES/ELEC/GAS/H2O/SANI","5300":"5300 WHOLESALE CLUBS","5411":"5411 GROCERY STORES/SUPERMARKETS","5912":"5912 DRUG STORES & PHARMACIES","5960":"5960 DIRECT MARKETING INSURANCE SVC","5983":"5983 FUEL DEALERS","6300":"6300 INSURANCE SALES/UNDERWRITE","6381":"6381 INSURANCE PREMIUMS","6399":"6399 INSURANCE - DEFAULT","7261":"7261 FUNERAL SERVICE/CREMATORIES","9211":"9211 COURT COSTS/ALIMONY/SUPPORT","9222":"9222 FINES","9223":"9223 BAIL AND BOND PAYMENTS","9311":"9311 TAX PAYMENTS","9399":"9399 GOV'T SERV - DEFAULT","9405":"9405 INTRA-GOVERNMENT PURCHASES"},"TRANSPORTATION":{"4111":"4111 LOCAL COMMUTER TRANSPORT","4121":"4121 TAXICABS/LIMOUSINES","4784":"4784 TOLLS AND BRIDGE FEES","4789":"4789 TRANSPORTATION SVCS - DEFAULT","5511":"5511 CAR & TRUCK DEALERS/NEW/USED","5521":"5521 CAR & TRUCK DEALERS/USED ONLY","5531":"5531 AUTO/HOME SUPPLY STORES","5532":"5532 AUTOMOTIVE TIRE STORES","5533":"5533 AUTOMOTIVE PARTS STORES","5541":"5541 SERVICE STATIONS","5542":"5542 AUTOMATED FUEL DISPENSERS","5571":"5571 MOTORCYCLE DEALERS","7523":"7523 PARKING LOTS, METERS, GARAGES","7531":"7531 AUTO BODY REPAIR SHOPS","7534":"7534 TIRE RETREAD/REPAIR SHOPS","7535":"7535 AUTO PAINT SHOPS","7538":"7538 AUTO SERVICE SHOPS/NON DEALER","7542":"7542 CAR WASHES","7549":"7549 TOWING SERVICES"},"HOUSEHOLD SERVICE":{"742":"742 VETERINARY SERVICES","780":"780 LANDSCAPE/HORTICULTURAL SER","1520":"1520 GEN CONTRACTORS RESIDENTL/COML","1711":"1711 HEATING, PLUMBING, AIR COND","1731":"1731 ELECTRICAL CONTRACTORS","1740":"1740 MASONRY/TILE/PLASTER/INSUL","1750":"1750 CARPENTRY","1761":"1761 ROOFING/SIDING/SHEET METAL","1771":"1771 CONTRACTORS - CONCRETE","4225":"4225 PUBLIC WAREHOUSING","4814":"4814 TELECOMMUNICATION SERVICES","4816":"4816 COMPUTER NETWORK/INFO SVCS","4829":"4829 WIRE TRANSFER MONEY ORDER","4899":"4899 CABLE, SAT, PAY TV/RADIO SVCS","5996":"5996 SWIMMING POOLS/SALES/SERV","5997":"5997 ELEC RAZOR STORES/SALE/SERV","6513":"6513 REAL EST AGNTS & MGRS RENTALS","7210":"7210 LAUNDRY/CLEANING/GARMENT SV","7211":"7211 LAUNDRIES-FAMILY/COMMERCIAL","7216":"7216 DRY CLEANERS","7217":"7217 CARPET/UPHOLSTERY CLEANING","7230":"7230 BEAUTY/BARBER SHOPS","7251":"7251 SHOE REPAIR/SHINE/HAT CLEAN","7298":"7298 HEALTH & BEAUTY SPAS","7321":"7321 CONSUMER CR REPORTING AGEN","7342":"7342 EXTERMINATING/DISINFECT SERV","7993":"7993 VIDEO AMUSEMENT GAME SUPPLY","8351":"8351 CHILD CARE SERVICES"},"RETAIL":{"4812":"4812 TELECOMMUNICATION EQUIPMENT","5200":"5200 HOME SUPPLY WAREHOUSE STORES","5211":"5211 LUMBER/BUILD. SUPPLY STORES","5231":"5231 GLASS/PAINT/WALLPAPER STORES","5251":"5251 HARDWARE STORES","5261":"5261 NURSERIES, LAWN/GARDEN SUPPLY,","5271":"5271 MOBILE HOME DEALERS","5309":"5309 DUTY FREE STORES","5310":"5310 DISCOUNT STORES","5311":"5311 DEPARTMENT STORES","5331":"5331 VARIETY STORES","5399":"5399 MISC GENERAL MERCHANDISE","5441":"5441 CANDY/NUT/CONFECTION STORES","5451":"5451 DAIRY PRODUCT STORES","5462":"5462 BAKERIES","5499":"5499 MISC FOOD STORES - DEFAULT","5611":"5611 MEN/BOYS CLOTHING/ACC STORES","5621":"5621 WOMENS READY TO WEAR STORES","5631":"5631 WOMENS ACCESS/SPECIALTY","5641":"5641 CHILDREN/INFANTS WEAR STORES","5651":"5651 FAMILY CLOTHING STORES","5655":"5655 SPORTS/RIDING APPAREL STORES","5661":"5661 SHOE STORES","5681":"5681 FURRIERS AND FUR SHOPS","5691":"5691 MENS/WOMENS CLOTHING STORES","5697":"5697 TAILOR/SEAMSTRESS/ALTERS","5698":"5698 WIG AND TOUPEE STORES","5699":"5699 MISC APPAREL/ACCESS STORES","5712":"5712 FURNITURE/EQUIP STORES","5713":"5713 FLOOR COVERING STORES","5714":"5714 DRAPERY & UPHOLSTERY STORES","5718":"5718 FIREPLACES & ACCESSORIES","5719":"5719 MISC HOME FURNISHING SPECIALTY","5722":"5722 HOUSEHOLD APPLIANCE STORES","5732":"5732 ELECTRONICS STORES","5733":"5733 MUSIC STORES/PIANOS","5734":"5734 COMPUTER SOFTWARE STORES","5735":"5735 RECORD STORES","5921":"5921 PKG STORES/BEER/WINE/LIQUOR","5931":"5931 USED MERCHANDISE STORES","5932":"5932 ANTIQUE SHOPS","5933":"5933 PAWN SHOPS","5935":"5935 WRECKING SALVAGE YARDS","5937":"5937 ANTIQUE REPRODUCTION STORES","5940":"5940 BICYCLE SHOPS/SALES/SERVICE","5941":"5941 SPORTING GOODS STORES","5942":"5942 BOOK STORES","5943":"5943 STATIONERY STORES","5944":"5944 JEWELRY STORES","5945":"5945 HOBBY, TOY & GAME STORES,","5946":"5946 CAMERA & PHOTO SUPPLY STORES","5947":"5947 GIFT, CARD, NOVELTY STORES","5948":"5948 LUGGAGE/LEATHER STORES","5949":"5949 FABRIC STORES","5950":"5950 GLASSWARE/CRYSTAL STORES","5968":"5968 CONTINUITY/SUBSCRIPTION MERCHT","5970":"5970 ARTIST/CRAFT SHOPS","5971":"5971 ART DEALERS & GALLERIES","5972":"5972 STAMP & COIN STORES","5973":"5973 RELIGIOUS GOODS STORES","5977":"5977 COSMETIC STORES","5978":"5978 TYPEWRITER/SALES/SERVICE","5992":"5992 FLORISTS","5993":"5993 CIGAR STORES/STANDS","5994":"5994 NEWS DEALERS/NEWSSTANDS","5995":"5995 PET STORES/FOOD & SUPPLY","5998":"5998 TENT AND AWNING SHOPS","5999":"5999 MISC SPECIALTY RETAIL","7221":"7221 PHOTO STUDIOS","7338":"7338 QUICK COPY/REPRO SERVICES","7622":"7622 RADIO/TV/STEREO REPAIR SHOP","7629":"7629 SMALL APPLIANCE REPAIR DEF","7631":"7631 WATCH/CLOCK/JEWELRY REPAIR","5815":"5815 DIGITAL GOODS MEDIA – BOOKS, MOVIES, MUSIC","5816":"5816 DIGITAL GOODS – GAMES","5817":"5817 DIGITAL GOODS – APPLICATIONS","5818":"5818 LARGE DIGITAL GOODS MERCHANT"},"DIRECT MARKETING":{"5962":"5962 DIRECT MKTG-TRAVEL RELATED ARR","5963":"5963 DIRECT SELL/DOOR-TO-DOOR","5964":"5964 CATALOG MERCHANT","5965":"5965 COMBINATION CATALOG & RETAIL","5966":"5966 OUTBOUND TELEMARKETING MERCHNT","5967":"5967 INBOUND TELEMARKETING MERCHANT","5969":"5969 OTHER DIRECT MARKETERS"},"ENTERTAINMENT":{"4457":"4457 BOAT RENTALS & LEASING","4468":"4468 MARINAS, SERVICE & SUPPLY,","5551":"5551 BOAT DEALERS","5561":"5561 CAMPER TRAILER DEALER","5592":"5592 MOTOR HOME DEALERS","5598":"5598 SNOWMOBILE DEALERS","5599":"5599 MISC AUTO DEALERS - DEFAULT","5811":"5811 CATERERS","5813":"5813 BARS/TAVERNS/LOUNGES/DISCOS","7032":"7032 SPORTING/RECREATIONAL CAMPS","7033":"7033 TRAILER PARKS/CAMPGROUNDS","7273":"7273 DATING & ESCORT SERVICES","7297":"7297 MASSAGE PARLORS","7513":"7513 TRUCK/UTILITY TRAILER RENTALS","7519":"7519 MOTOR HOME/RV RENTALS","7832":"7832 MOTION PICTURE THEATRES","7841":"7841 DVD/VIDEO TAPE RENTAL STORES","7922":"7922 THEATRICAL PRODUCERS","7929":"7929 BANDS/ORCHESTRAS/ENTERTAIN","7932":"7932 BILLIARD/POOL ESTABLISHMENT","7933":"7933 BOWLING ALLEYS","7941":"7941 COMMERCIAL/PRO SPORTS","7991":"7991 TOURIST ATTRACTIONS AND XHBT","7992":"7992 PUBLIC GOLF COURSES","7994":"7994 VIDEO GAME ARCADES/ESTABLISH","7995":"7995 BETTING/TRACK/CASINO/LOTTO","7996":"7996 AMUSEMENT PARKS/CIRCUS","7997":"7997 MEMBER CLUBS/SPORT/REC/GOLF","7998":"7998 AQUARIUMS/SEAQUARIUMS","7999":"7999 RECREATION SERVICES"},"TRAVEL":{"4511":"4511 All AIRLINES","7512":"7512 AUTO RENTAL","7011":"7011 LODGING","4011":"4011 RAILROADS","4112":"4112 PASSENGER RAILWAYS","4131":"4131 BUS LINES","4411":"4411 STEAMSHIP/CRUISE LINES","4582":"4582 AIRPORTS/FIELDS/TERMINALS","4722":"4722 TRAVEL AGENCIES","4723":"4723 TUI TRAVEL AGENCY","7012":"7012 TIMESHARES","7511":"7511 TRUCK STOP"},"PROFESSIONAL SERVICE":{"763":"763 AGRICULTURAL CO-OPERATIVE","1799":"1799 SPEC CONTRACTORS - DEFAULT","4215":"4215 COURIER SERVICES","4821":"4821 TELEGRAPH SERVICES","5422":"5422 FREEZER/MEAT LOCKERS","6211":"6211 SECURITIES BROKERS/DEALERS","7276":"7276 TAX PREPARATION SERVICE","7278":"7278 BUYING/SHOPPING SERVICES","7296":"7296 CLOTHING/RENT/COSTUME/UNIFO","7299":"7299 MISC PERSONAL SERV - DEF","7333":"7333 COMMERCIAL PHOTO/ART/GRAPH","7339":"7339 STENOGRAPHIC SERVICES","7349":"7349 CLEAN/MAINT/JANITORIAL SERV","7392":"7392 MGMT/CONSULT/PUBLIC REL SER","7393":"7393 DETECTIVE/PROTECTIVE AGEN","7394":"7394 EQUIP/FURN RENT/LEASE SERV","7395":"7395 PHOTOFINISH LABS/DEV","7623":"7623 AIR COND/REFRIG REPAIR SHOP","7641":"7641 FURNITURE REUPHOLSTERY/REPAIR","7692":"7692 WELDING SERVICES","7699":"7699 MISC REPAIR SERVICES","8111":"8111 LEGAL SERVICES ATTORNEYS","8911":"8911 ARCHITECTURAL/ENG/SURVEY","8931":"8931 ACCOUNTANTS/AUDITORS/BOOKPR","8999":"8999 PROFESSIONAL SERVICES - DEF","9402":"9402 POSTAGE STAMPS"},"ORGANIZATION":{"8398":"8398 CHARITABLE/SOC SERVICE ORGS","8641":"8641 CIVIC/SOCIAL/FRATERNAL ASSC","8651":"8651 POLITICAL ORGANIZATIONS","8661":"8661 RELIGIOUS ORGANIZATIONS","8675":"8675 AUTO ASSOCIATIONS","8699":"8699 MEMBER ORGANIZATIONS - DEF"},"SCHOOLS":{"7911":"7911 DANCE HALLS/STUDIOS/SCHOOLS","8211":"8211 ELEMENTARY/SECONDARY SCHOOLS","8220":"8220 COLLEGES/UNIV/JC/PROFESSION","8241":"8241 CORRESPONDENCE SCHOOLS","8244":"8244 BUSINESS/SECRETARIAL SCHOOL","8249":"8249 TRADE/VOCATIONAL SCHOOLS","8299":"8299 SCHOOLS - DEFAULT"},"BUSINESS TO BUSINESS":{"2741":"2741 MISC PUBLISHING & PRINTING","2791":"2791 TYPESETTING/PLATE MAKING ETC","2842":"2842 SPECIALTY CLEANING/POLISHING","4214":"4214 MOTOR FREIGHT CARRIERS","5013":"5013 MOTOR VEHICLE SUPPLY/NEW PARTS","5021":"5021 COMMERCIAL FURNITURE","5039":"5039 CONSTRUCTION MATERIALS - DEF","5044":"5044 OFFICE/PHOTO EQUIPMENT","5045":"5045 COMPUTERS/PERIPHERALS/SOFTWARE","5046":"5046 COMMERCIAL EQUIPMENT - DEFAULT","5047":"5047 DENTAL/LAB/MED EQUIPMENT","5051":"5051 METAL SERVICE CENTERS","5065":"5065 ELECTRICAL PARTS/EQUIPMENT","5072":"5072 HARDWARE EQUIPMENT/SUPPLIES","5074":"5074 PLUMBING/HEATING EQUIPMENT","5085":"5085 INDUSTRIAL SUPPLIES - DEF","5094":"5094 PRECIOUS STONES/METALS/JEWELRY","5099":"5099 DURABLE GOODS - DEFAULT","5111":"5111 STATIONERY/OFFICE SUPPLIES","5122":"5122 DRUGS/DRUGGISTS SUNDRIES","5131":"5131 PIECE GOODS/NOTIONS/DRY GOODS","5137":"5137 UNIFORMS & COMMERCIAL CLOTHING","5139":"5139 COMMERCIAL FOOTWEAR","5169":"5169 CHEMICALS/ALLIED PRODS - DEF","5172":"5172 PETROLEUM/PETROLEUM PRODUCTS","5192":"5192 BOOKS/PERIODICALS/NEWSPAPERS","5193":"5193 FLORIST SUPPLIES/NURSERY STOCK","5198":"5198 PAINT, VARNISHES & SUPPLIES,","5199":"5199 NON-DURABLE GOODS - DEFAULT","7311":"7311 ADVERTISING SERVICES","7361":"7361 EMPLOYMENT/TEMP HELP AGEN","7372":"7372 COMPUTER PROGRAM/SYS DESIGN","7375":"7375 INFORMATION RETRIEVAL SERVICES","7379":"7379 COMPUTER MAINT/SVCS - DEF","7399":"7399 BUSINESS SERVICES - DEFAULT","7829":"7829 FILMS/VIDEO PRODUCTION/DIST","8734":"8734 TESTING LABS (NON-MEDICAL)"},"RESTAURANTS":{"5812":"5812 RESTAURANTS","5814":"5814 FAST FOOD RESTAURANTS"},"HEALTH CARE":{"4119":"4119 AMBULANCE SERVICE","5975":"5975 HEARING AID/SALES/SERVICE","5976":"5976 ORTHOPEDIC GOODS","7277":"7277 COUNSELING SERVICE - ALL","8011":"8011 DOCTORS & PHYSICIANS","8021":"8021 DENTISTS/ORTHODONTISTS","8031":"8031 OSTEOPATHS","8041":"8041 CHIROPRACTORS","8042":"8042 OPTOMETRISTS/OPHTHALMOLOGISTS","8043":"8043 OPTICIANS","8044":"8044 OPTICAL GOODS & GLASSES","8049":"8049 PODIATRISTS/CHIROPODISTS","8050":"8050 NURSING/PERSONAL CARE FAC","8062":"8062 HOSPITALS","8071":"8071 MEDICAL/DENTAL LABS","8099":"8099 MED/HEALTH SERVICES - DEF"},"OTHER":{"4815":"4815 VISAPHONE","6010":"6010 MANUAL CASH DISBURSE","6011":"6011 AUTOMATED CASH DISBURSE","6012":"6012 FINANCIAL INST/MERCHANDISE","6051":"6051 NON-FIN INST/FC/MO/TC","9950":"9950 INTRA-COMPANY PURCHASES","6540":"6540 STORED VALUE CARD PURCHASE/LOAD"},"VALIDRANGES":{"3000":"3299","3351":"3500","3501":"3900"}}}]);